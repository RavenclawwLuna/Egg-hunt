<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Egg Hunt Platformer</title>
  <style>
    body {
      margin: 0;
      background: #0b1020;
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
      user-select: none;
    }

    #wrap {
      position: relative;
      width: 900px;
      height: 520px;
    }

    canvas {
      width: 900px;
      height: 520px;
      border-radius: 18px;
      background: linear-gradient(#101b3d, #081022);
      box-shadow: 0 12px 35px rgba(0,0,0,0.45);
      image-rendering: pixelated;
    }

    #ui {
      position: absolute;
      top: 14px;
      left: 14px;
      right: 14px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      pointer-events: none;
    }

    .pill {
      padding: 10px 14px;
      border-radius: 999px;
      background: rgba(255,255,255,0.10);
      border: 1px solid rgba(255,255,255,0.14);
      color: #fff;
      font-weight: 700;
      letter-spacing: 0.3px;
      text-shadow: 0 2px 8px rgba(0,0,0,0.3);
      backdrop-filter: blur(8px);
    }

    #hint {
      position: absolute;
      bottom: 12px;
      left: 50%;
      transform: translateX(-50%);
      color: rgba(255,255,255,0.85);
      font-size: 13px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,0.07);
      border: 1px solid rgba(255,255,255,0.12);
      pointer-events: none;
    }

    #win {
      position: absolute;
      inset: 0;
      display: none;
      justify-content: center;
      align-items: center;
      background: rgba(0,0,0,0.55);
      border-radius: 18px;
    }

    #winCard {
      width: 420px;
      padding: 22px;
      border-radius: 18px;
      background: rgba(255,255,255,0.10);
      border: 1px solid rgba(255,255,255,0.18);
      color: #fff;
      text-align: center;
      backdrop-filter: blur(10px);
      box-shadow: 0 18px 50px rgba(0,0,0,0.45);
    }

    #winCard h1 { margin: 0 0 10px; font-size: 26px; }
    #winCard p { margin: 0 0 16px; opacity: 0.9; }

    button {
      pointer-events: auto;
      border: none;
      padding: 10px 14px;
      border-radius: 12px;
      font-weight: 800;
      cursor: pointer;
      background: #ffd166;
      color: #222;
      box-shadow: 0 10px 18px rgba(0,0,0,0.25);
    }
    button:active { transform: translateY(1px); }
  </style>
</head>
<body>
  <div id="wrap">
    <canvas id="c" width="900" height="520"></canvas>

    <div id="ui">
      <div class="pill" id="eggUI">Eggs: 0 / 10</div>
      <div class="pill" id="roomUI">Room: 1</div>
    </div>

    <div id="hint" class="pill">Move: A/D or ‚Üê/‚Üí | Jump: W/‚Üë/Space | Go to edges to change rooms</div>

    <div id="win">
      <div id="winCard">
        <h1>üê£ You found all 10 eggs!</h1>
        <p>You‚Äôre officially the Egg Champion ‚ú®</p>
        <button id="restart">Restart</button>
      </div>
    </div>
  </div>

<script>
(() => {
  const canvas = document.getElementById("c");
  const ctx = canvas.getContext("2d");

  const eggUI = document.getElementById("eggUI");
  const roomUI = document.getElementById("roomUI");
  const win = document.getElementById("win");
  const restartBtn = document.getElementById("restart");

  const W = canvas.width;
  const H = canvas.height;

  // --- Controls ---
  const k = {};
  addEventListener("keydown", e => k[e.key.toLowerCase()] = true);
  addEventListener("keyup", e => k[e.key.toLowerCase()] = false);

  // --- Physics ---
  const GRAV = 0.75;
  const MOVE = 0.65;         // faster
  const MAXS = 6.0;
  const JUMP = 14.5;         // higher jump so you can reach platforms

  // --- Utility ---
  const clamp = (n,a,b) => Math.max(a, Math.min(b,n));

  function rectsOverlap(a,b){
    return a.x < b.x+b.w && a.x+a.w > b.x && a.y < b.y+b.h && a.y+a.h > b.y;
  }

  // --- Rooms ---
  // Each room has platforms and egg positions.
  // Eggs are collected by TOUCHING them.
  const rooms = [
    {
      name: "Room 1",
      bg: ["#101b3d", "#081022"],
      platforms: [
        {x:0, y:H-40, w:W, h:40},
        {x:90, y:H-140, w:190, h:18},
        {x:360, y:H-210, w:210, h:18},
        {x:650, y:H-155, w:170, h:18},
        {x:520, y:H-310, w:180, h:18},
      ],
      eggs: [
        {x: 150, y: H-170, id: 0},
        {x: 735, y: H-185, id: 1},
        {x: 580, y: H-340, id: 2},
      ]
    },
    {
      name: "Room 2",
      bg: ["#1c1242", "#0b0a1a"],
      platforms: [
        {x:0, y:H-40, w:W, h:40},
        {x:120, y:H-120, w:210, h:18},
        {x:420, y:H-170, w:190, h:18},
        {x:680, y:H-240, w:150, h:18},
        {x:220, y:H-280, w:180, h:18},
        {x:460, y:H-340, w:210, h:18},
      ],
      eggs: [
        {x: 180, y: H-150, id: 3},
        {x: 480, y: H-200, id: 4},
        {x: 740, y: H-270, id: 5},
      ]
    },
    {
      name: "Room 3",
      bg: ["#0f2b3a", "#07141b"],
      platforms: [
        {x:0, y:H-40, w:W, h:40},
        {x:70, y:H-160, w:170, h:18},
        {x:270, y:H-230, w:200, h:18},
        {x:520, y:H-200, w:180, h:18},
        {x:720, y:H-320, w:150, h:18},
        {x:360, y:H-360, w:200, h:18},
      ],
      eggs: [
        {x: 110, y: H-190, id: 6},
        {x: 770, y: H-350, id: 7},
        {x: 420, y: H-390, id: 8},
        {x: 850, y: H-70,  id: 9},
      ]
    }
  ];

  let room = 0;

  // --- Player ---
  const p = {
    x: 90,
    y: H-120,
    w: 34,
    h: 44,
    vx: 0,
    vy: 0,
    onGround: false,
    face: 1,
  };

  // --- Egg state ---
  const collected = new Array(10).fill(false);

  function eggCount(){
    let n = 0;
    for(let i=0;i<collected.length;i++) if(collected[i]) n++;
    return n;
  }

  function updateUI(){
    eggUI.textContent = `Eggs: ${eggCount()} / 10`;
    roomUI.textContent = `Room: ${room+1}`;
  }

  function resetGame(){
    for(let i=0;i<collected.length;i++) collected[i] = false;
    room = 0;
    p.x = 90;
    p.y = H-120;
    p.vx = 0;
    p.vy = 0;
    win.style.display = "none";
    updateUI();
  }

  restartBtn.onclick = resetGame;

  // --- Drawing ---
  function drawPlatform(pl){
    // cute soft platforms
    ctx.fillStyle = "rgba(255,255,255,0.12)";
    ctx.fillRect(pl.x, pl.y, pl.w, pl.h);

    ctx.fillStyle = "rgba(255,255,255,0.20)";
    ctx.fillRect(pl.x, pl.y, pl.w, 4);
  }

  function drawEgg(x,y){
    // visible egg (cute!)
    ctx.save();
    ctx.translate(x, y);

    // glow
    ctx.beginPath();
    ctx.arc(0, 0, 18, 0, Math.PI*2);
    ctx.fillStyle = "rgba(255, 209, 102, 0.18)";
    ctx.fill();

    // egg body
    ctx.beginPath();
    ctx.ellipse(0, 2, 11, 14, 0, 0, Math.PI*2);
    ctx.fillStyle = "#fff";
    ctx.fill();

    // spots
    ctx.beginPath();
    ctx.arc(-4, 2, 2.2, 0, Math.PI*2);
    ctx.arc(3, 6, 2.5, 0, Math.PI*2);
    ctx.arc(4, -2, 1.8, 0, Math.PI*2);
    ctx.fillStyle = "#ffd166";
    ctx.fill();

    // tiny face
    ctx.fillStyle = "#2a2a2a";
    ctx.beginPath();
    ctx.arc(-3, 2, 1.2, 0, Math.PI*2);
    ctx.arc(3, 2, 1.2, 0, Math.PI*2);
    ctx.fill();
    ctx.beginPath();
    ctx.arc(0, 5, 1.6, 0, Math.PI);
    ctx.strokeStyle = "#2a2a2a";
    ctx.lineWidth = 1.2;
    ctx.stroke();

    ctx.restore();
  }

  function drawPlayer(){
    // CUTER SPRITE (little blob cat)
    ctx.save();
    ctx.translate(p.x + p.w/2, p.y + p.h/2);

    // shadow
    ctx.beginPath();
    ctx.ellipse(0, p.h/2 - 4, 16, 6, 0, 0, Math.PI*2);
    ctx.fillStyle = "rgba(0,0,0,0.25)";
    ctx.fill();

    // body
    ctx.beginPath();
    ctx.roundRect(-p.w/2, -p.h/2, p.w, p.h, 14);
    ctx.fillStyle = "#ffb3c7";
    ctx.fill();

    // belly
    ctx.beginPath();
    ctx.ellipse(0, 6, 12, 14, 0, 0, Math.PI*2);
    ctx.fillStyle = "rgba(255,255,255,0.35)";
    ctx.fill();

    // ears
    ctx.beginPath();
    ctx.moveTo(-12, -20);
    ctx.lineTo(-6, -30);
    ctx.lineTo(-2, -20);
    ctx.closePath();
    ctx.fillStyle = "#ffb3c7";
    ctx.fill();

    ctx.beginPath();
    ctx.moveTo(12, -20);
    ctx.lineTo(6, -30);
    ctx.lineTo(2, -20);
    ctx.closePath();
    ctx.fillStyle = "#ffb3c7";
    ctx.fill();

    // face
    ctx.fillStyle = "#2a2a2a";
    ctx.beginPath();
    ctx.arc(-6, -2, 2, 0, Math.PI*2);
    ctx.arc(6, -2, 2, 0, Math.PI*2);
    ctx.fill();

    // blush
    ctx.fillStyle = "rgba(255, 80, 140, 0.35)";
    ctx.beginPath();
    ctx.arc(-12, 2, 3, 0, Math.PI*2);
    ctx.arc(12, 2, 3, 0, Math.PI*2);
    ctx.fill();

    // smile
    ctx.beginPath();
    ctx.arc(0, 2, 4, 0, Math.PI);
    ctx.strokeStyle = "#2a2a2a";
    ctx.lineWidth = 1.6;
    ctx.stroke();

    // tiny tail
    ctx.beginPath();
    ctx.arc(p.face*18, 10, 7, 0, Math.PI*2);
    ctx.fillStyle = "#ffb3c7";
    ctx.fill();

    ctx.restore();
  }

  // --- Collision ---
  function moveAndCollide(){
    const r = rooms[room];

    // input
    let left = k["a"] || k["arrowleft"];
    let right = k["d"] || k["arrowright"];
    let jump = k["w"] || k["arrowup"] || k[" "];

    if(left && !right){
      p.vx -= MOVE;
      p.face = -1;
    } else if(right && !left){
      p.vx += MOVE;
      p.face = 1;
    } else {
      p.vx *= 0.84;
    }

    p.vx = clamp(p.vx, -MAXS, MAXS);

    // jump
    if(jump && p.onGround){
      p.vy = -JUMP;
      p.onGround = false;
    }

    // gravity
    p.vy += GRAV;
    p.vy = clamp(p.vy, -50, 18);

    // X move
    p.x += p.vx;
    for(const pl of r.platforms){
      const box = {x:p.x, y:p.y, w:p.w, h:p.h};
      if(rectsOverlap(box, pl)){
        if(p.vx > 0) p.x = pl.x - p.w;
        if(p.vx < 0) p.x = pl.x + pl.w;
        p.vx = 0;
      }
    }

    // Y move
    p.y += p.vy;
    p.onGround = false;
    for(const pl of r.platforms){
      const box = {x:p.x, y:p.y, w:p.w, h:p.h};
      if(rectsOverlap(box, pl)){
        if(p.vy > 0){
          p.y = pl.y - p.h;
          p.vy = 0;
          p.onGround = true;
        } else if(p.vy < 0){
          p.y = pl.y + pl.h;
          p.vy = 0;
        }
      }
    }

    // keep inside vertical bounds
    if(p.y > H - 60){
      p.y = H - 60;
      p.vy = 0;
      p.onGround = true;
    }

    // Room switching at edges
    if(p.x < -10){
      room = (room - 1 + rooms.length) % rooms.length;
      p.x = W - p.w - 10;
      updateUI();
    }
    if(p.x > W - p.w + 10){
      room = (room + 1) % rooms.length;
      p.x = 10;
      updateUI();
    }
  }

  // --- Egg collection ---
  function collectEggs(){
    const r = rooms[room];
    for(const e of r.eggs){
      if(collected[e.id]) continue;

      // egg hitbox
      const eggBox = {x: e.x-12, y: e.y-14, w: 24, h: 28};
      const pBox = {x:p.x, y:p.y, w:p.w, h:p.h};

      if(rectsOverlap(pBox, eggBox)){
        collected[e.id] = true;
        updateUI();

        // win condition
        if(eggCount() === 10){
          win.style.display = "flex";
        }
      }
    }
  }

  // --- Background ---
  function drawBackground(){
    const r = rooms[room];
    const g = ctx.createLinearGradient(0,0,0,H);
    g.addColorStop(0, r.bg[0]);
    g.addColorStop(1, r.bg[1]);
    ctx.fillStyle = g;
    ctx.fillRect(0,0,W,H);

    // stars
    ctx.fillStyle = "rgba(255,255,255,0.18)";
    for(let i=0;i<70;i++){
      const x = (i*97 + room*53) % W;
      const y = (i*41 + room*29) % (H-60);
      ctx.fillRect(x, y, 2, 2);
    }

    // room label
    ctx.fillStyle = "rgba(255,255,255,0.06)";
    ctx.font = "bold 64px Arial";
    ctx.fillText(rooms[room].name, 28, 110);
  }

  // --- Main loop ---
  function tick(){
    if(win.style.display !== "flex"){
      moveAndCollide();
      collectEggs();
    }

    drawBackground();

    // draw platforms
    const r = rooms[room];
    for(const pl of r.platforms) drawPlatform(pl);

    // draw eggs (ONLY if not collected)
    for(const e of r.eggs){
      if(!collected[e.id]) drawEgg(e.x, e.y);
    }

    // draw player
    drawPlayer();

    requestAnimationFrame(tick);
  }

  updateUI();
  tick();
})();
</script>
</body>
</html>
